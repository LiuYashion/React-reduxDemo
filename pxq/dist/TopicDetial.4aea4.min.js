webpackJsonp([2],{278:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(8),u=n(s),c=a(70),p=(n(c),a(49),a(41),a(55),a(82)),d=function(e){function t(e,a){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return o(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"loading-wrap"},u.default.createElement("div",{className:"loading-1"}),u.default.createElement("div",{className:"loading-2"}))}}]),t}(s.Component),f=function(e){function t(e,a){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state={message:"撒的发生的"},n.sendmessage=function(){var e=n.props.userLogData.data.token,t=n.props.topicDetialData.toJS().data.data.id,a=n.state.message;n.props.postTopicReply(t,a,e)},n.inputMessage=function(e){n.setState({message:e.target.value})},n}return o(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){console.log(e)}},{key:"render",value:function(){return this.state.message,this.props.replyStateData,console.log(11),u.default.createElement("div",null)}}]),t}(s.Component),m=function(e){function t(e,a){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.simplifyTime=function(e){if(e){var t=new Date(e),a=new Date,n=a.getFullYear(),r=t.getFullYear(),i=t.getMonth()+1,o=t.getDate();return n!=r?"回复于"+r+"年"+i+"月"+o+"日":"回复于"+i+"月"+o+"日"}return""},n}return o(t,e),l(t,[{key:"render",value:function(){var e=this,t=function(){return{__html:e.props.reply.content}};return u.default.createElement("div",{className:"reply"},u.default.createElement("div",{className:"reply-ups"},u.default.createElement("div",{className:"ups ups-icon"}),u.default.createElement("div",{className:"ups ups-count"},this.props.reply.ups.length),u.default.createElement("div",{className:"ups down-icon"})),u.default.createElement("div",{className:"reply-content"},u.default.createElement("div",{className:"reply-head"},this.props.reply.author.loginname,this.simplifyTime(this.props.reply.create_at)),u.default.createElement("div",{dangerouslySetInnerHTML:t()})))}}]),t}(s.Component),h=function(e){function t(e,a){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.state={data:{data:{title:"",author:{avatar_url:"",loginname:""},create_at:"",reply_count:"",visit_count:""}},isFetching:!0},n.simplifyTime=function(e){if(e){var t=new Date(e),a=new Date,n=a.getFullYear(),r=t.getFullYear(),i=t.getMonth()+1,o=t.getDate();return n!=r?"于"+r+"年"+i+"月"+o+"日":"于"+i+"月"+o+"日"}return""},n.simplifyName=function(e){return e?"由"+e:""},n.simplifyLocation=function(e){var t={good:"精华",ask:"问答",share:"分享",job:"招聘"};return e?" 发布在"+t[e]:""},n.simplifyCount=function(e,t){return e?"  ("+e+"/"+t+")":""},n}return o(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.topicDetialData.get("data");this.setState({isFetching:e.topicDetialData.get("isFetching"),data:t?t:""}),e.userLogData.state=this.props.userLogData.state,this.props.userLogData.data&&(e.userLogData.data=this.props.userLogData.data)}},{key:"componentDidMount",value:function(){this.props.queryTopicDetial("/api/v1/topic/"+this.props.location.query.id)}},{key:"componentWillUpdate",value:function(e,t){}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.topicDetialData.get("isFetching")}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this,t=void 0,a=function(){return{__html:e.state.data.data.content}},n={backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundImage:"url("+this.state.data.data.author.avatar_url+")"};return t=this.state.data.data.title?u.default.createElement("div",null,u.default.createElement("div",{className:"topic-info"},u.default.createElement("div",{className:"topic-left",style:n}),u.default.createElement("div",{className:"topic-right"},u.default.createElement("div",{className:"right-info-1"},this.simplifyName(this.state.data.data.author.loginname),this.simplifyCount(this.state.data.data.reply_count,this.state.data.data.visit_count)),u.default.createElement("div",{className:"right-info-2"},this.simplifyTime(this.state.data.data.create_at),this.simplifyLocation(this.state.data.data.tab)))),u.default.createElement("div",{className:"topic-content",dangerouslySetInnerHTML:a()}),u.default.createElement("div",{className:"topic-reply"},this.state.data.data.replies.map(function(e){return u.default.createElement(m,{key:e.id,reply:e})}))):u.default.createElement("div",null),console.log(this.props.userLogData.state),u.default.createElement("div",{className:"container"},u.default.createElement(p.HeadNav,{needHeadNav:!0,title:this.state.data.data.title}),this.state.isFetching?u.default.createElement(d,null):"",t,"login"==this.props.userLogData.state?u.default.createElement(f,this.props):"")}}]),t}(s.Component);t.default=(0,p.Container)({id:"saleRecord",component:h})}});